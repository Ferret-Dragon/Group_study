<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maximum Flow - DSA Study Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="home.html" class="nav-brand">DSA Study Platform</a>
            <div class="menu-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item"><a href="home.html" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="graphs.html" class="nav-link">Graphs</a></li>
                <li class="nav-item"><a href="divide-conquer.html" class="nav-link">Divide & Conquer</a></li>
                <li class="nav-item"><a href="greedy.html" class="nav-link">Greedy</a></li>
                <li class="nav-item"><a href="dynamic-programming.html" class="nav-link">Dynamic Programming</a></li>
                <li class="nav-item"><a href="max-flow.html" class="nav-link active">Max Flow</a></li>
                <li class="nav-item"><a href="review.html" class="nav-link">Final Review</a></li>
            </ul>
        </div>
    </nav>

    <!-- Header -->
    <header>
        <h1>Maximum Flow</h1>
        <p class="subtitle">Ford-Fulkerson, Edmonds-Karp, Bipartite Matching, Max-Flow Min-Cut</p>
    </header>

    <div class="container">
<div class="subtopic">
                            <h3>Flow Networks</h3>
                            <div class="key-concepts">
                                <h4>Key Concepts:</h4>
                                <ul>
                                    <li><strong>Flow Network:</strong> Directed graph with source s, sink t, and edge capacities c(u,v)</li>
                                    <li><strong>Flow Properties:</strong>
                                        <ul>
                                            <li>Capacity constraint: 0 â‰¤ f(u,v) â‰¤ c(u,v)</li>
                                            <li>Flow conservation: Flow in = Flow out (except s and t)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Max Flow:</strong> Maximum flow from s to t</li>
                                    <li><strong>Cut:</strong> Partition of vertices into S and T where sâˆˆS, tâˆˆT</li>
                                    <li><strong>Min-Cut:</strong> Cut with minimum capacity</li>
                                </ul>
                            </div>
                            <div class="formula">
                                Max-Flow Min-Cut Theorem: Maximum flow value = Minimum cut capacity
                            </div>
                        </div>

                        <div class="subtopic">
                            <h3>Ford-Fulkerson Method</h3>
                            <div class="key-concepts">
                                <h4>Key Concepts:</h4>
                                <ul>
                                    <li><strong>Method (not specific algorithm):</strong> Framework using augmenting paths</li>
                                    <li><strong>Augmenting Path:</strong> Path from s to t in residual graph with available capacity</li>
                                    <li><strong>Residual Graph:</strong> Shows remaining capacity after current flow</li>
                                    <li><strong>Residual Capacity:</strong> c_f(u,v) = c(u,v) - f(u,v) + f(v,u)</li>
                                    <li><strong>Time Complexity:</strong> O(EÂ·|f*|) where |f*| is max flow (depends on path-finding method)</li>
                                </ul>
                            </div>
                            <div class="video-recommendations">
                                <h4>Video Recommendations:</h4>
                                <a href="https://www.youtube.com/watch?v=Tl90tNtKvxs" target="_blank" class="video-link">ðŸŽ¥ MIT OCW - Max Flow (47 min)</a>
                                <a href="https://www.youtube.com/watch?v=LdOnanfc5TM" target="_blank" class="video-link">ðŸŽ¥ William Fiset - Ford-Fulkerson (10 min)</a>
                                <a href="https://www.youtube.com/watch?v=GiN3jRdgxU4" target="_blank" class="video-link">ðŸŽ¥ Reducible - Max Flow (16 min - great visualization)</a>
                            </div>
                            <div class="practice-tip">
                                <h4>Algorithm:</h4>
                                <ol>
                                    <li>Initialize: f(u,v) = 0 for all edges</li>
                                    <li>While there exists augmenting path p in residual graph G_f:
                                        <ul>
                                            <li>Find bottleneck capacity c_f(p) = min capacity along p</li>
                                            <li>Augment flow along p by c_f(p)</li>
                                            <li>Update residual graph</li>
                                        </ul>
                                    </li>
                                    <li>Return total flow</li>
                                </ol>
                            </div>
                            <div class="warning-box">
                                <h4>Important Note:</h4>
                                <p>Ford-Fulkerson might not terminate with irrational capacities! Use Edmonds-Karp (BFS for paths) for polynomial time: O(VEÂ²).</p>
                            </div>
                        </div>

                        <div class="subtopic">
                            <h3>Edmonds-Karp Algorithm</h3>
                            <div class="key-concepts">
                                <h4>Key Points:</h4>
                                <ul>
                                    <li><strong>Specific implementation:</strong> Ford-Fulkerson with BFS for finding augmenting paths</li>
                                    <li><strong>Time Complexity:</strong> O(VEÂ²) - polynomial!</li>
                                    <li><strong>Why BFS?:</strong> Finds shortest augmenting path (fewest edges), guarantees termination</li>
                                </ul>
                            </div>
                        </div>

                        <div class="subtopic">
                            <h3>Maximum Bipartite Matching</h3>
                            <div class="key-concepts">
                                <h4>Key Concepts:</h4>
                                <ul>
                                    <li><strong>Bipartite Graph:</strong> Vertices split into two sets, edges only between sets</li>
                                    <li><strong>Matching:</strong> Set of edges with no shared vertices</li>
                                    <li><strong>Maximum Matching:</strong> Matching with maximum number of edges</li>
                                    <li><strong>Reduction to Max Flow:</strong>
                                        <ul>
                                            <li>Add source s connected to all left vertices (capacity 1)</li>
                                            <li>Add sink t connected from all right vertices (capacity 1)</li>
                                            <li>All bipartite edges have capacity 1</li>
                                            <li>Max flow = Maximum matching size</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="video-recommendations">
                                <h4>Video Recommendations:</h4>
                                <a href="https://www.youtube.com/watch?v=GhjwOiJ4SqU" target="_blank" class="video-link">ðŸŽ¥ William Fiset - Bipartite Graph Matching (12 min)</a>
                            </div>
                            <div class="practice-tip">
                                <h4>Example Application:</h4>
                                <p>Job assignment: n workers, m jobs, edges show which workers can do which jobs. Max matching = maximum number of jobs that can be assigned.</p>
                            </div>
                        </div>

                        <div class="quick-reference">
                            <h3>Max Flow Quick Reference</h3>
                            <table class="complexity-table">
                                <thead>
                                    <tr>
                                        <th>Concept</th>
                                        <th>Definition</th>
                                        <th>Complexity</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Ford-Fulkerson</td>
                                        <td>Method using augmenting paths</td>
                                        <td>O(EÂ·|f*|)</td>
                                    </tr>
                                    <tr>
                                        <td>Edmonds-Karp</td>
                                        <td>Ford-Fulkerson with BFS</td>
                                        <td>O(VEÂ²)</td>
                                    </tr>
                                    <tr>
                                        <td>Max-Flow Min-Cut</td>
                                        <td>Max flow value = Min cut capacity</td>
                                        <td>-</td>
                                    </tr>
                                    <tr>
                                        <td>Bipartite Matching</td>
                                        <td>Reduce to max flow problem</td>
                                        <td>O(VEÂ²)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <ul class="checklist">
                            <li><input type="checkbox" onchange="updateProgress()"> Understand flow network properties</li>
                            <li><input type="checkbox" onchange="updateProgress()"> Know what residual graph represents</li>
                            <li><input type="checkbox" onchange="updateProgress()"> Can trace Ford-Fulkerson algorithm</li>
                            <li><input type="checkbox" onchange="updateProgress()"> Understand Max-Flow Min-Cut theorem</li>
                            <li><input type="checkbox" onchange="updateProgress()"> Know how to reduce bipartite matching to max flow</li>
                            <li><input type="checkbox" onchange="updateProgress()"> Review problem set ps8</li>
                        </ul>

                        <div class="subtopic" style="margin-top: 40px;">
                            <h3>Interactive Max Flow Practice - Find Augmenting Paths!</h3>
                            <p style="color: #555; margin-bottom: 20px;">Practice Ford-Fulkerson by selecting edges to form augmenting paths and computing the maximum flow.</p>

                            <!-- Max Flow Exercise -->
                            <div class="trace-exercise">
                                <h4>Exercise 1: Ford-Fulkerson - Find the Maximum Flow</h4>
                                <p><strong>Instructions:</strong> Find augmenting paths from source S to sink T. Click edges in order to form a path, then submit to augment flow.</p>

                                <div style="display: flex; gap: 20px; margin: 20px 0;">
                                    <div style="flex: 1;">
                                        <h5 style="color: #0d47a1;">Flow Network (Capacities)</h5>
                                        <svg width="500" height="350" viewBox="0 0 500 350" style="background: #f8f9fa; border-radius: 8px;">
                                            <!-- Edges with capacities -->
                                            <!-- S to A -->
                                            <line id="flow-edge-SA" x1="80" y1="175" x2="180" y2="100" stroke="#90caf9" stroke-width="4" style="cursor: pointer;" onclick="selectFlowEdge('SA', 10)"/>
                                            <text x="110" y="125" fill="#0d47a1" font-weight="bold" font-size="14">10</text>

                                            <!-- S to B -->
                                            <line id="flow-edge-SB" x1="80" y1="175" x2="180" y2="250" stroke="#90caf9" stroke-width="4" style="cursor: pointer;" onclick="selectFlowEdge('SB', 5)"/>
                                            <text x="110" y="225" fill="#0d47a1" font-weight="bold" font-size="14">5</text>

                                            <!-- A to B -->
                                            <line id="flow-edge-AB" x1="200" y1="120" x2="200" y2="230" stroke="#90caf9" stroke-width="4" style="cursor: pointer;" onclick="selectFlowEdge('AB', 15)"/>
                                            <text x="210" y="175" fill="#0d47a1" font-weight="bold" font-size="14">15</text>

                                            <!-- A to T -->
                                            <line id="flow-edge-AT" x1="220" y1="100" x2="370" y2="175" stroke="#90caf9" stroke-width="4" style="cursor: pointer;" onclick="selectFlowEdge('AT', 10)"/>
                                            <text x="310" y="125" fill="#0d47a1" font-weight="bold" font-size="14">10</text>

                                            <!-- B to T -->
                                            <line id="flow-edge-BT" x1="220" y1="250" x2="370" y2="175" stroke="#90caf9" stroke-width="4" style="cursor: pointer;" onclick="selectFlowEdge('BT', 10)"/>
                                            <text x="310" y="225" fill="#0d47a1" font-weight="bold" font-size="14">10</text>

                                            <!-- Arrow markers -->
                                            <defs>
                                                <marker id="arrowhead-flow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                                    <polygon points="0 0, 10 3, 0 6" fill="#0d47a1" />
                                                </marker>
                                            </defs>

                                            <!-- Arrows -->
                                            <line x1="95" y1="165" x2="165" y2="110" stroke="#0d47a1" stroke-width="2" marker-end="url(#arrowhead-flow)"/>
                                            <line x1="95" y1="185" x2="165" y2="240" stroke="#0d47a1" stroke-width="2" marker-end="url(#arrowhead-flow)"/>
                                            <line x1="200" y1="135" x2="200" y2="215" stroke="#0d47a1" stroke-width="2" marker-end="url(#arrowhead-flow)"/>
                                            <line x1="235" y1="110" x2="355" y2="165" stroke="#0d47a1" stroke-width="2" marker-end="url(#arrowhead-flow)"/>
                                            <line x1="235" y1="240" x2="355" y2="185" stroke="#0d47a1" stroke-width="2" marker-end="url(#arrowhead-flow)"/>

                                            <!-- Nodes -->
                                            <circle cx="80" cy="175" r="30" fill="#1976d2" stroke="#0d47a1" stroke-width="3"/>
                                            <text x="80" y="180" text-anchor="middle" fill="white" font-weight="bold" font-size="18">S</text>

                                            <circle cx="200" cy="100" r="30" fill="#42a5f5" stroke="#0d47a1" stroke-width="3"/>
                                            <text x="200" y="105" text-anchor="middle" fill="white" font-weight="bold" font-size="18">A</text>

                                            <circle cx="200" cy="250" r="30" fill="#42a5f5" stroke="#0d47a1" stroke-width="3"/>
                                            <text x="200" y="255" text-anchor="middle" fill="white" font-weight="bold" font-size="18">B</text>

                                            <circle cx="400" cy="175" r="30" fill="#1976d2" stroke="#0d47a1" stroke-width="3"/>
                                            <text x="400" y="180" text-anchor="middle" fill="white" font-weight="bold" font-size="18">T</text>

                                            <!-- Current Flow Labels -->
                                            <text id="flow-label-SA" x="135" y="145" fill="#d32f2f" font-weight="bold" font-size="12">(0/10)</text>
                                            <text id="flow-label-SB" x="135" y="245" fill="#d32f2f" font-weight="bold" font-size="12">(0/5)</text>
                                            <text id="flow-label-AB" x="220" y="175" fill="#d32f2f" font-weight="bold" font-size="12">(0/15)</text>
                                            <text id="flow-label-AT" x="310" y="145" fill="#d32f2f" font-weight="bold" font-size="12">(0/10)</text>
                                            <text id="flow-label-BT" x="310" y="245" fill="#d32f2f" font-weight="bold" font-size="12">(0/10)</text>
                                        </svg>
                                    </div>
                                </div>

                                <div id="current-path" style="margin: 20px 0; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                                    <strong>Current Path:</strong> <span id="path-display">Click edges to build a path from S to T</span>
                                </div>

                                <div style="margin: 20px 0;">
                                    <button onclick="submitPath()" style="background: #1565c0; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; font-size: 16px; margin-right: 10px;">Augment Flow with This Path</button>
                                    <button onclick="clearPath()" style="background: #f57c00; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; font-size: 16px; margin-right: 10px;">Clear Path</button>
                                    <button onclick="resetFlowExercise()" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; font-size: 16px;">Reset All</button>
                                </div>

                                <div id="flow-stats" style="margin: 20px 0; padding: 15px; background: #fff3e0; border-radius: 8px;">
                                    <strong>Current Total Flow:</strong> <span id="total-flow">0</span><br>
                                    <strong>Augmenting Paths Found:</strong> <span id="paths-count">0</span><br>
                                    <strong>Path History:</strong> <span id="path-history">None yet</span>
                                </div>

                                <div id="flow-feedback" style="margin-top: 20px; padding: 15px; border-radius: 8px; display: none;"></div>

                                <div class="answer-reveal" style="margin-top: 20px;">
                                    <button onclick="toggleAnswer('maxflow-answer')" style="background: #0d47a1; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Show/Hide Solution</button>
                                    <div id="maxflow-answer" class="answer-content">
                                        <h4>Maximum Flow Solution:</h4>
                                        <p><strong>Maximum Flow Value: 15</strong></p>
                                        <h5>Augmenting Paths (one possible sequence):</h5>
                                        <ol>
                                            <li><strong>Path 1: S â†’ A â†’ T</strong>
                                                <ul>
                                                    <li>Bottleneck capacity: min(10, 10) = 10</li>
                                                    <li>Flow after: Sâ†’A(10/10), Aâ†’T(10/10)</li>
                                                    <li>Total flow: 10</li>
                                                </ul>
                                            </li>
                                            <li><strong>Path 2: S â†’ B â†’ T</strong>
                                                <ul>
                                                    <li>Bottleneck capacity: min(5, 10) = 5</li>
                                                    <li>Flow after: Sâ†’B(5/5), Bâ†’T(5/10)</li>
                                                    <li>Total flow: 15</li>
                                                </ul>
                                            </li>
                                        </ol>
                                        <p><strong>Final Flow Configuration:</strong></p>
                                        <ul>
                                            <li>S â†’ A: 10/10 (saturated)</li>
                                            <li>S â†’ B: 5/5 (saturated)</li>
                                            <li>A â†’ B: 0/15 (unused)</li>
                                            <li>A â†’ T: 10/10 (saturated)</li>
                                            <li>B â†’ T: 5/10 (partially used)</li>
                                        </ul>
                                        <p><strong>Why is this maximum?</strong></p>
                                        <p>The minimum cut is {S, A, B} | {T} with capacity = 10 (Aâ†’T) + 5 (Bâ†’T) = 15. By the Max-Flow Min-Cut theorem, this proves our flow of 15 is maximum.</p>
                                        <p><em>Note: S is saturated (all outgoing capacity used), so no more flow can leave the source!</em></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Min-Cut Exercise -->
                            <div class="trace-exercise" style="margin-top: 40px;">
                                <h4>Exercise 2: Find the Minimum Cut</h4>
                                <p><strong>Instructions:</strong> After finding the maximum flow above, identify which edges form the minimum cut.</p>

                                <div class="quiz-box">
                                    <div class="quiz-question">
                                        <p><strong>Q1:</strong> What is the capacity of the minimum cut?</p>
                                        <div class="quiz-options">
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q1')">A) 10</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, true, 'cut-q1')">B) 15</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q1')">C) 20</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q1')">D) 25</div>
                                        </div>
                                        <div class="quiz-explanation" id="cut-q1">
                                            <strong>Correct!</strong> The minimum cut has capacity 15, which equals the maximum flow (Max-Flow Min-Cut Theorem). The cut separates {S, A, B} from {T}, cutting edges Aâ†’T (capacity 10) and Bâ†’T (capacity 5).
                                        </div>
                                    </div>

                                    <div class="quiz-question">
                                        <p><strong>Q2:</strong> Which edges cross the minimum cut?</p>
                                        <div class="quiz-options">
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q2')">A) Sâ†’A and Sâ†’B</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, true, 'cut-q2')">B) Aâ†’T and Bâ†’T</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q2')">C) Sâ†’A and Aâ†’T</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q2')">D) Aâ†’B only</div>
                                        </div>
                                        <div class="quiz-explanation" id="cut-q2">
                                            <strong>Correct!</strong> The minimum cut edges are Aâ†’T and Bâ†’T. These are the only edges going from the source side {S, A, B} to the sink side {T}. Their total capacity is 10 + 5 = 15.
                                        </div>
                                    </div>

                                    <div class="quiz-question">
                                        <p><strong>Q3:</strong> In the residual graph at maximum flow, is there a path from S to T?</p>
                                        <div class="quiz-options">
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q3')">A) Yes, there is always a path</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, true, 'cut-q3')">B) No, there is no path</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q3')">C) Only if we use backward edges</div>
                                            <div class="quiz-option" onclick="checkAnswer(this, false, 'cut-q3')">D) Depends on the graph</div>
                                        </div>
                                        <div class="quiz-explanation" id="cut-q3">
                                            <strong>Correct!</strong> At maximum flow, there is NO augmenting path from S to T in the residual graph. If there were, we could increase the flow further. This is how Ford-Fulkerson knows to stop!
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Practice Tips -->
                            <div class="practice-tip" style="margin-top: 30px;">
                                <h4>Key Insights:</h4>
                                <ul>
                                    <li><strong>Augmenting Path:</strong> Any path from S to T in the residual graph with available capacity</li>
                                    <li><strong>Bottleneck:</strong> Minimum capacity edge along the path - this limits how much flow we can push</li>
                                    <li><strong>Residual Graph:</strong> Shows remaining capacity. After pushing flow f on edge (u,v), subtract f from forward edge, add f to backward edge</li>
                                    <li><strong>Termination:</strong> Algorithm stops when no augmenting path exists in residual graph</li>
                                    <li><strong>Max-Flow Min-Cut:</strong> The maximum flow value always equals the minimum cut capacity - this proves optimality!</li>
                                </ul>
                            </div>
                        </div>

                        <script>
                            // Max Flow Exercise State
                            let currentPath = [];
                            let currentNode = 'S';
                            let flowState = {
                                'SA': 0, 'SB': 0, 'AB': 0, 'AT': 0, 'BT': 0
                            };
                            const capacities = {
                                'SA': 10, 'SB': 5, 'AB': 15, 'AT': 10, 'BT': 10
                            };
                            const edgeConnections = {
                                'S': [['SA', 'A'], ['SB', 'B']],
                                'A': [['AB', 'B'], ['AT', 'T']],
                                'B': [['BT', 'T']],
                                'T': []
                            };
                            let totalFlow = 0;
                            let pathHistory = [];

                            function selectFlowEdge(edge, capacity) {
                                // Check if this edge can be added to current path
                                const [from, to] = edge.split('');

                                if (currentNode !== from) {
                                    alert(`Invalid edge! Current position is at ${currentNode}, but you selected an edge from ${from}.`);
                                    return;
                                }

                                // Check if edge has available capacity
                                const available = capacities[edge] - flowState[edge];
                                if (available <= 0) {
                                    alert('This edge is saturated (no remaining capacity)!');
                                    return;
                                }

                                currentPath.push(edge);
                                currentNode = to;

                                // Highlight the edge
                                document.getElementById('flow-edge-' + edge).setAttribute('stroke', '#ff6b6b');
                                document.getElementById('flow-edge-' + edge).setAttribute('stroke-width', '6');

                                updatePathDisplay();
                            }

                            function updatePathDisplay() {
                                const pathStr = currentPath.length > 0 ?
                                    'S â†’ ' + currentPath.map(e => e[1]).join(' â†’ ') :
                                    'Click edges to build a path from S to T';
                                document.getElementById('path-display').textContent = pathStr;
                            }

                            function clearPath() {
                                // Reset path highlighting
                                currentPath.forEach(edge => {
                                    document.getElementById('flow-edge-' + edge).setAttribute('stroke', '#90caf9');
                                    document.getElementById('flow-edge-' + edge).setAttribute('stroke-width', '4');
                                });
                                currentPath = [];
                                currentNode = 'S';
                                updatePathDisplay();
                            }

                            function submitPath() {
                                if (currentPath.length === 0) {
                                    alert('Please select at least one edge to form a path!');
                                    return;
                                }

                                if (currentNode !== 'T') {
                                    alert('Path must end at T (sink)! Current position: ' + currentNode);
                                    return;
                                }

                                // Calculate bottleneck
                                let bottleneck = Infinity;
                                currentPath.forEach(edge => {
                                    const available = capacities[edge] - flowState[edge];
                                    bottleneck = Math.min(bottleneck, available);
                                });

                                // Augment flow
                                currentPath.forEach(edge => {
                                    flowState[edge] += bottleneck;
                                });

                                totalFlow += bottleneck;
                                pathHistory.push(`${currentPath.join('â†’')} (flow: ${bottleneck})`);

                                // Update display
                                updateFlowLabels();
                                document.getElementById('total-flow').textContent = totalFlow;
                                document.getElementById('paths-count').textContent = pathHistory.length;
                                document.getElementById('path-history').textContent = pathHistory.join(', ');

                                // Show feedback
                                const feedback = document.getElementById('flow-feedback');
                                feedback.style.display = 'block';
                                feedback.style.background = '#d4edda';
                                feedback.style.color = '#155724';
                                feedback.innerHTML = `<strong>Path Augmented!</strong> Added ${bottleneck} units of flow along path ${currentPath.join(' â†’ ')}. Total flow is now ${totalFlow}.`;

                                // Check if done
                                if (totalFlow === 15) {
                                    feedback.innerHTML += '<br><br><strong>ðŸŽ‰ You found the maximum flow of 15!</strong> No more augmenting paths exist.';
                                }

                                clearPath();
                            }

                            function updateFlowLabels() {
                                Object.keys(flowState).forEach(edge => {
                                    const label = document.getElementById('flow-label-' + edge);
                                    if (label) {
                                        label.textContent = `(${flowState[edge]}/${capacities[edge]})`;
                                        // Color saturated edges differently
                                        if (flowState[edge] === capacities[edge]) {
                                            label.setAttribute('fill', '#1b5e20');
                                        }
                                    }
                                });
                            }

                            function resetFlowExercise() {
                                currentPath = [];
                                currentNode = 'S';
                                flowState = {'SA': 0, 'SB': 0, 'AB': 0, 'AT': 0, 'BT': 0};
                                totalFlow = 0;
                                pathHistory = [];

                                // Reset all edges
                                ['SA', 'SB', 'AB', 'AT', 'BT'].forEach(edge => {
                                    document.getElementById('flow-edge-' + edge).setAttribute('stroke', '#90caf9');
                                    document.getElementById('flow-edge-' + edge).setAttribute('stroke-width', '4');
                                });

                                updateFlowLabels();
                                updatePathDisplay();
                                document.getElementById('total-flow').textContent = '0';
                                document.getElementById('paths-count').textContent = '0';
                                document.getElementById('path-history').textContent = 'None yet';
                                document.getElementById('flow-feedback').style.display = 'none';
                            }
                        </script>
</div>

    <!-- Footer -->
    <footer>
        <p>Good luck on your final exam! ðŸš€</p>
        <p style="font-size: 0.9em; margin-top: 10px;">Platform generated with Claude Code</p>
    </footer>

    <script src="scripts.js"></script>
</body>
</html>
